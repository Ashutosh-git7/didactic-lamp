<!-- FULL FINAL HTML CODE FOR ASHIRWAD MART -->
<!DOCTYPE html>
<html>
<head>
  <title>ðŸš€ Ashirwad Mart - Grow Up Together</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f6f9; margin:0; padding:0; }
    header { background:#2c3e50; color:white; padding:15px; text-align:center; font-size:20px; font-weight:bold; }
    .container { padding:20px; }
    .card { background:white; border-radius:10px; padding:15px; margin-bottom:15px; box-shadow:0 2px 6px rgba(0,0,0,0.2); }
    input, button, select { width:100%; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #ccc; }
    button { background:#2980b9; color:white; font-weight:bold; cursor:pointer; }
    button:hover { background:#1f6391; }
    .hidden { display:none; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th, td { border:1px solid #ddd; padding:8px; text-align:center; font-size:14px; }
    th { background:#2980b9; color:white; }
    .logout { background:#e74c3c; }
    .delete-btn { background:#e74c3c; color:white; padding:5px 10px; border:none; border-radius:5px; cursor:pointer; }
    .delete-btn:hover { background:#c0392b; }
  </style>
</head>
<body>
  <header>ðŸš€ Ashirwad Mart - Grow Up Together</header>

  <div class="container">

    <!-- Registration -->
    <div id="registerDiv" class="card">
      <h3>New Registration</h3>
      <input type="text" id="regName" placeholder="Full Name" />
      <input type="text" id="regMobile" placeholder="Mobile Number" />
      <input type="text" id="regWallet" placeholder="Your USDT (BEP20) Wallet Address" />
      <input type="password" id="regPassword" placeholder="Password" />
      <button onclick="register()">Register</button>
      <p>Already have account? <a href="#" onclick="showLogin()">Login</a></p>
    </div>

    <!-- Login -->
    <div id="loginDiv" class="card hidden">
      <h3>Login</h3>
      <input type="text" id="loginMobile" placeholder="Mobile Number" />
      <input type="password" id="loginPassword" placeholder="Password" />
      <button onclick="login()">Login</button>
      <p>No account? <a href="#" onclick="showRegister()">Register</a></p>
    </div>

    <!-- User Dashboard -->
    <div id="userDiv" class="hidden">
      <div class="card">
        <h3>Welcome, <span id="userName"></span></h3>
        <p><b>Wallet:</b> <span id="userWallet"></span></p>
        <p><b>Deposit:</b> <span id="userDeposit">0</span> USDT</p>
        <p><b>Income Wallet:</b> <span id="userIncome">0</span> USDT</p>
        <p><b>Referral Wallet:</b> <span id="userReferral">0</span> USDT</p>
        <button onclick="logout()" class="logout">Logout</button>
      </div>
    </div>

    <!-- Admin Login -->
    <div id="adminLoginDiv" class="card hidden">
      <h3>Admin Login</h3>
      <input type="text" id="adminId" placeholder="Admin ID" />
      <input type="password" id="adminPass" placeholder="Password" />
      <button onclick="adminLogin()">Login</button>
    </div>

    <!-- Admin Panel -->
    <div id="adminDiv" class="hidden">
      <div class="card">
        <h3>ðŸ“Š Admin Panel</h3>
        <button onclick="logoutAdmin()" class="logout">Logout</button>
        <table id="userTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Mobile</th>
              <th>Wallet</th>
              <th>Deposit</th>
              <th>Income</th>
              <th>Referral</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

  </div>

  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyCVajz3nSlVxwTk-dsC8a2",
      authDomain: "ashirwadmart-6d657.firebaseapp.com",
      databaseURL: "https://ashirwadmart-6d657-default-rtdb.firebaseio.com",
      projectId: "ashirwadmart-6d657",
      storageBucket: "ashirwadmart-6d657.appspot.com",
      messagingSenderId: "248517086147",
      appId: "1:248517086147:web:d93f883db84c36a5f36eae"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Show functions
    function showRegister(){ document.getElementById('registerDiv').classList.remove('hidden'); document.getElementById('loginDiv').classList.add('hidden'); }
    function showLogin(){ document.getElementById('loginDiv').classList.remove('hidden'); document.getElementById('registerDiv').classList.add('hidden'); }

    // Register
    function register(){
      let name = document.getElementById('regName').value;
      let mobile = document.getElementById('regMobile').value;
      let wallet = document.getElementById('regWallet').value;
      let pass = document.getElementById('regPassword').value;
      if(!name || !mobile || !wallet || !pass){ alert("Fill all fields"); return; }
      db.ref("users/"+mobile).set({
        name:name, mobile:mobile, wallet:wallet, pass:pass,
        deposit:0, income:0, referral:0
      });
      alert("Registered Successfully");
      showLogin();
    }

    // Login
    function login(){
      let mobile = document.getElementById('loginMobile').value;
      let pass = document.getElementById('loginPassword').value;
      db.ref("users/"+mobile).get().then(s=>{
        if(!s.exists()){ alert("No User Found"); return; }
        let data = s.val();
        if(data.pass!==pass){ alert("Wrong Password"); return; }
        localStorage.setItem("loggedUser",mobile);
        loadUser();
      });
    }

    // Load User
    function loadUser(){
      let mobile = localStorage.getItem("loggedUser");
      if(!mobile){ return; }
      db.ref("users/"+mobile).on("value",snap=>{
        let d = snap.val(); if(!d){ return; }
        document.getElementById("registerDiv").classList.add("hidden");
        document.getElementById("loginDiv").classList.add("hidden");
        document.getElementById("userDiv").classList.remove("hidden");
        document.getElementById("adminLoginDiv").classList.add("hidden");
        document.getElementById("adminDiv").classList.add("hidden");
        document.getElementById("userName").innerText = d.name;
        document.getElementById("userWallet").innerText = d.wallet;
        document.getElementById("userDeposit").innerText = d.deposit;
        document.getElementById("userIncome").innerText = d.income;
        document.getElementById("userReferral").innerText = d.referral;
      });
    }

    function logout(){ localStorage.removeItem("loggedUser"); location.reload(); }

    // Admin Login
    function adminLogin(){
      let id = document.getElementById('adminId').value;
      let pass = document.getElementById('adminPass').value;
      if(id==="Admin" && pass==="Jaihanuman@7"){
        localStorage.setItem("isAdmin","true");
        loadAdmin();
      } else { alert("Wrong Admin Credentials"); }
    }

    function loadAdmin(){
      document.getElementById("registerDiv").classList.add("hidden");
      document.getElementById("loginDiv").classList.add("hidden");
      document.getElementById("userDiv").classList.add("hidden");
      document.getElementById("adminLoginDiv").classList.add("hidden");
      document.getElementById("adminDiv").classList.remove("hidden");

      let tbody = document.querySelector("#userTable tbody");
      db.ref("users").on("value",snap=>{
        tbody.innerHTML="";
        snap.forEach(c=>{
          let d=c.val();
          let tr=document.createElement("tr");
          tr.innerHTML=`
            <td>${d.name}</td>
            <td>${d.mobile}</td>
            <td>${d.wallet}</td>
            <td>${d.deposit}</td>
            <td>${d.income}</td>
            <td>${d.referral}</td>
            <td><button class="delete-btn" onclick="deleteUser('${d.mobile}')">Delete</button></td>`;
          tbody.appendChild(tr);
        });
      });
    }

    function deleteUser(mobile){
      if(confirm("Are you sure to delete this user?")){
        db.ref("users/"+mobile).remove();
        alert("User Deleted");
      }
    }

    function logoutAdmin(){ localStorage.removeItem("isAdmin"); location.reload(); }

    // Auto check
    window.onload=()=>{
      if(localStorage.getItem("loggedUser")){ loadUser(); }
      else if(localStorage.getItem("isAdmin")){ loadAdmin(); }
      else { showRegister(); document.getElementById("adminLoginDiv").classList.remove("hidden"); }
    }
  </script>
</body>
</html>
