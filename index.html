<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>Ashirwad Mart - 6 Level Commission Calculator</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
    .container { max-width: 1200px; margin: auto; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
    .header { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; padding: 30px; text-align: center; }
    .header h1 { font-size: 2.5em; margin-bottom: 10px; }
    .input-section { padding: 30px; background: #f8f9fa; }
    .form-group { margin-bottom: 20px; }
    label { display: block; font-weight: bold; color: #333; margin-bottom: 8px; font-size: 1.1em; }
    input, select { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; transition: all 0.3s; }
    input:focus, select:focus { outline: none; border-color: #4CAF50; box-shadow: 0 0 10px rgba(76,175,80,0.3); }
    .btn { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; padding: 15px 30px; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s; width: 100%; margin-top: 10px; }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(76,175,80,0.3); }
    .btn-secondary { background: linear-gradient(45deg, #ff9800, #f57c00); }
    .results-section { padding: 30px; }
    .commission-table { width: 100%; border-collapse: collapse; margin: 20px 0; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
    th, td { padding: 15px; text-align: center; border-bottom: 1px solid #eee; }
    th { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; font-weight: bold; }
    tr:hover { background: #f8f9fa; }
    .company-share { background: linear-gradient(45deg, #2196F3, #1976D2); color: white; padding: 20px; border-radius: 10px; text-align: center; font-size: 1.3em; font-weight: bold; margin: 20px 0; }
    .history-section { padding: 30px; background: #f8f9fa; }
    .history-item { background: white; margin: 15px 0; padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); display: flex; justify-content: space-between; align-items: center; }
    .delete-btn { background: #f44336; color: white; padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 12px; }
    .stats { display: flex; gap: 20px; margin: 20px 0; }
    .stat-card { flex: 1; background: linear-gradient(45deg, #FF6B6B, #FF8E53); color: white; padding: 20px; border-radius: 10px; text-align: center; }
    @media (max-width: 768px) { .stats { flex-direction: column; } }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üåü Ashirwad Mart 6-Level Commission</h1>
      <p>Product BV Distribution Calculator (Data Auto-Save)</p>
    </div>

    <div class="input-section">
      <div class="form-group">
        <label>Product Purchase BV:</label>
        <input type="number" id="purchaseBV" min="0" value="100" placeholder="BV Amount Enter ‡§ï‡§∞‡•á‡§Ç">
      </div>
      <div class="form-group">
        <label>Geography (Location):</label>
        <input type="text" id="geoLocation" placeholder="Ranchi, Jharkhand">
      </div>
      <div class="form-group">
        <label>Member Name:</label>
        <input type="text" id="memberName" placeholder="Member ‡§ï‡§æ ‡§®‡§æ‡§Æ">
      </div>
      <button class="btn" onclick="calculateDistribution()">Calculate & Save</button>
      <button class="btn btn-secondary" onclick="exportData()">üì• Export All Data (Excel)</button>
      <button class="btn" onclick="clearAllData()" style="background: #f44336;">üóëÔ∏è Clear All Data</button>
    </div>

    <div class="results-section">
      <div class="stats">
        <div class="stat-card">
          <div id="totalRecords">0</div>
          <div>Total Records</div>
        </div>
        <div class="stat-card">
          <div id="totalBV">‚Çπ0</div>
          <div>Total BV Processed</div>
        </div>
        <div class="stat-card">
          <div id="companyProfit">‚Çπ0</div>
          <div>Company Profit</div>
        </div>
      </div>

      <table class="commission-table">
        <thead>
          <tr>
            <th>Level</th>
            <th>% Share</th>
            <th>Amount (‚Çπ)</th>
            <th>Geography</th>
          </tr>
        </thead>
        <tbody id="commissionTable"></tbody>
      </table>

      <div class="company-share" id="companyShare"></div>
    </div>

    <div class="history-section">
      <h3>üìã Previous Calculations History</h3>
      <div id="historyList"></div>
    </div>
  </div>

  <script>
    const LEVEL_PERCENTS = [25, 20, 15, 5, 3, 2]; // 70% Total Distribution
    
    // Load saved data on page load
    window.onload = function() {
      loadSavedData();
      updateStats();
    };

    function calculateDistribution() {
      const bv = parseFloat(document.getElementById('purchaseBV').value);
      const geo = document.getElementById('geoLocation').value || "N/A";
      const member = document.getElementById('memberName').value || "Anonymous";
      
      if (isNaN(bv) || bv <= 0) {
        alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§π‡•Ä BV amount ‡§°‡§æ‡§≤‡•á‡§Ç!");
        return;
      }

      const distBV = bv * 0.7;
      const commissionTable = document.getElementById('commissionTable');
      commissionTable.innerHTML = "";
      
      let commissions = [];
      let totalCom = 0;

      // Calculate each level
      for (let i = 0; i < 6; i++) {
        const commAmt = (distBV * LEVEL_PERCENTS[i]) / 100;
        totalCom += commAmt;
        
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>Level ${i+1}</td>
          <td>${LEVEL_PERCENTS[i]}%</td>
          <td>‚Çπ${commAmt.toFixed(2)}</td>
          <td>${geo}</td>
        `;
        commissionTable.appendChild(row);
        commissions.push(commAmt);
      }

      // Company share (30%)
      const companyShare = (bv * 0.3).toFixed(2);
      document.getElementById('companyShare').innerHTML = 
        `üí∞ ‡§ï‡§Ç‡§™‡§®‡•Ä ‡§ï‡§æ Share (30%): ‚Çπ${companyShare} | ‡§ï‡•Å‡§≤ Distribution: ‚Çπ${totalCom.toFixed(2)}`;

      // Save to localStorage
      saveCalculation({ bv, geo, member, commissions, companyShare: parseFloat(companyShare), date: new Date().toLocaleString('hi-IN') });
      updateStats();
    }

    function saveCalculation(data) {
      let records = JSON.parse(localStorage.getItem('ashirwadRecords') || '[]');
      records.unshift(data); // Add to beginning
      if (records.length > 1000) records = records.slice(0, 1000); // Limit records
      localStorage.setItem('ashirwadRecords', JSON.stringify(records));
      loadHistory();
    }

    function loadSavedData() {
      loadHistory();
      updateStats();
    }

    function loadHistory() {
      const records = JSON.parse(localStorage.getItem('ashirwadRecords') || '[]');
      const historyList = document.getElementById('historyList');
      historyList.innerHTML = records.length ? 
        records.map((record, index) => `
          <div class="history-item">
            <div>
              <strong>${record.member}</strong> | BV: ‚Çπ${record.bv} 
              <br><small>${record.geo} | ${record.date}</small>
              <br>Company: ‚Çπ${record.companyShare}
            </div>
            <div>
              <button class="delete-btn" onclick="deleteRecord(${records.length - 1 - index})">Delete</button>
            </div>
          </div>
        `).join('') : '<p>‡§ï‡•ã‡§à ‡§™‡•Å‡§∞‡§æ‡§®‡§æ record ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§®‡§Ø‡§æ calculation ‡§ï‡§∞‡•á‡§Ç!</p>';
    }

    function deleteRecord(index) {
      let records = JSON.parse(localStorage.getItem('ashirwadRecords') || '[]');
      records.splice(index, 1);
      localStorage.setItem('ashirwadRecords', JSON.stringify(records));
      loadHistory();
      updateStats();
    }

    function updateStats() {
      const records = JSON.parse(localStorage.getItem('ashirwadRecords') || '[]');
      const totalRecords = records.length;
      const totalBV = records.reduce((sum, r) => sum + r.bv, 0);
      const companyProfit = records.reduce((sum, r) => sum + r.companyShare, 0);
      
      document.getElementById('totalRecords').textContent = totalRecords;
      document.getElementById('totalBV').textContent = `‚Çπ${totalBV.toLocaleString()}`;
      document.getElementById('companyProfit').textContent = `‚Çπ${companyProfit.toLocaleString()}`;
    }

    function exportData() {
      const records = JSON.parse(localStorage.getItem('ashirwadRecords') || '[]');
      if (!records.length) {
        alert('‡§ï‡•ã‡§à data ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à export ‡§ï‡§∞‡§®‡•á ‡§ï‡•ã!');
        return;
      }
      
      let csv = 'Member,BV,Geography,Company Share,Date
';
      records.forEach(r => {
        csv += `"${r.member}","${r.bv}","${r.geo}","${r.companyShare}","${r.date}"
`;
      });
      
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `AshirwadMart_Records_${new Date().toISOString().split('T')[0]}.csv`;
      a.click();
    }

    function clearAllData() {
      if (confirm('‡§∏‡§≠‡•Ä data delete ‡§π‡•ã ‡§ú‡§æ‡§è‡§ó‡§æ! ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§π‡•à‡§Ç?')) {
        localStorage.removeItem('ashirwadRecords');
        loadHistory();
        updateStats();
      }
    }
  </script>
</body>
</html>
