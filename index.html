<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ashirwad Mini App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f1f5f9;
      padding: 20px;
      margin: 0;
      color: #111827;
    }

    .card {
      background: #ffffff;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      margin-bottom: 20px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    h1, h2 {
      text-align: center;
      margin-top: 0;
    }

    input, button {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      font-size: 16px;
      border: 1px solid #cbd5e1;
      border-radius: 8px;
    }

    button {
      background: #2563eb;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #1e40af;
    }

    label {
      font-weight: 600;
      display: block;
      margin-top: 10px;
    }

    .admin-section {
      display: none;
    }

    .divider {
      border-top: 1px solid #e2e8f0;
      margin: 20px 0;
    }

    .user-data p {
      margin: 5px 0;
    }

    .ref-box {
      background: #fef3c7;
      padding: 10px;
      border-radius: 10px;
      font-size: 14px;
      word-break: break-word;
    }

    .wallet-section {
      margin-top: 10px;
    }

    @media screen and (max-width: 480px) {
      input, button {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>üí∞ Ashirwad Mini App</h1>
    <h2>User Login</h2>
    <input type="text" id="userId" placeholder="Enter your User ID" />
    <button onclick="loginUser()">Login</button>
  </div>

  <div id="userSection" class="card" style="display:none">
    <h2>üë§ Welcome, <span id="currentUser"></span></h2>

    <label>Deposit Amount (USDT)</label>
    <input type="number" id="depositAmount" min="10" max="1000" placeholder="Min $10 - Max $1000" />
    <button onclick="makeDeposit()">Deposit</button>

    <label>Your BEP20 Wallet (for returns)</label>
    <input type="text" id="walletAddress" placeholder="Your USDT BEP20 wallet" />
    <button onclick="saveWallet()">Save Wallet</button>

    <div class="wallet-section">
      <label>Your Referral Link</label>
      <div class="ref-box" id="refLink">Login to get your link</div>
    </div>

    <div class="divider"></div>

    <h3>üìä Your Info</h3>
    <div class="user-data">
      <p><b>Total Deposit:</b> $<span id="depoAmt">0</span></p>
      <p><b>Monthly 5% Return:</b> $<span id="monthlyProfit">0</span></p>
      <p><b>Referral Earnings:</b> $<span id="refEarnings">0</span></p>
      <p><b>Your Referrals:</b> <span id="teamList">None</span></p>
    </div>
  </div>

  <div class="card">
    <h2>üí∏ Deposit Address</h2>
    <p><b>USDT BEP20:</b><br> <code>0x49F7A836A32C1aCF04d4d20Fa87A14C7a19aB74B</code></p>
  </div>

  <div class="card">
    <h2>üîê Admin Login</h2>
    <input type="text" id="adminId" placeholder="Admin ID" />
    <input type="password" id="adminPass" placeholder="Password" />
    <button onclick="adminLogin()">Login as Admin</button>
  </div>

  <div class="card admin-section" id="adminPanel">
    <h2>üõ†Ô∏è Admin Panel</h2>
    <div id="adminData"></div>
  </div>

  <script>
    const userDB = {};
    let currentUser = null;

    function loginUser() {
      const uid = document.getElementById("userId").value.trim();
      const ref = new URLSearchParams(window.location.search).get("ref");
      if (!userDB[uid]) {
        userDB[uid] = { deposit: 0, wallet: "", refBy: ref || null, referrals: [], refEarn: 0 };
        if (ref && userDB[ref]) {
          userDB[ref].referrals.push(uid);
        }
      }
      currentUser = uid;
      document.getElementById("currentUser").innerText = uid;
      document.getElementById("userSection").style.display = "block";
      document.getElementById("refLink").innerText = window.location.href.split('?')[0] + "?ref=" + uid;
      updateUserData();
    }

    function makeDeposit() {
      const amt = parseFloat(document.getElementById("depositAmount").value);
      if (amt >= 10 && amt <= 1000) {
        userDB[currentUser].deposit += amt;
        const ref = userDB[currentUser].refBy;
        if (ref && userDB[ref]) {
          userDB[ref].refEarn += amt * 0.10;
        }
        updateUserData();
        alert("Deposit recorded! Send USDT to the fixed address.");
      } else {
        alert("Enter an amount between $10 and $1000.");
      }
    }

    function saveWallet() {
      const addr = document.getElementById("walletAddress").value.trim();
      userDB[currentUser].wallet = addr;
      alert("Wallet saved.");
    }

    function updateUserData() {
      const u = userDB[currentUser];
      document.getElementById("depoAmt").innerText = u.deposit.toFixed(2);
      document.getElementById("monthlyProfit").innerText = (u.deposit * 0.05).toFixed(2);
      document.getElementById("refEarnings").innerText = u.refEarn.toFixed(2);
      document.getElementById("teamList").innerText = u.referrals.length ? u.referrals.join(", ") : "None";
    }

    function adminLogin() {
      const id = document.getElementById("adminId").value.trim();
      const pass = document.getElementById("adminPass").value.trim();
      if (id === "admin" && pass === "1234") {
        document.getElementById("adminPanel").style.display = "block";
        showAdminData();
      } else {
        alert("Wrong admin credentials.");
      }
    }

    function showAdminData() {
      let html = "";
      for (const uid in userDB) {
        const u = userDB[uid];
        html += `
          <div style="border:1px solid #e5e7eb; padding:10px; margin-bottom:15px; border-radius:8px">
            <b>ID:</b> ${uid}<br>
            <label>Deposit: <input type="number" value="${u.deposit}" onchange="updateField('${uid}', 'deposit', this.value)" /></label><br>
            <label>Wallet: <input type="text" value="${u.wallet}" onchange="updateField('${uid}', 'wallet', this.value)" /></label><br>
            <label>Referral Earnings: <input type="number" value="${u.refEarn}" onchange="updateField('${uid}', 'refEarn', this.value)" /></label><br>
            <small>Referrals: ${u.referrals.join(", ") || "None"}</small>
          </div>`;
      }
      document.getElementById("adminData").innerHTML = html;
    }

    function updateField(uid, field, value) {
      if (field === "deposit" || field === "refEarn") {
        userDB[uid][field] = parseFloat(value);
      } else {
        userDB[uid][field] = value;
      }
      if (uid === currentUser) updateUserData();
    }
  </script>
</body>
</html>
